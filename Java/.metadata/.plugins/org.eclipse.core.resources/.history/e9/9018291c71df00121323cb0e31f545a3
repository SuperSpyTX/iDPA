package com.superspytx.advanced;

import java.lang.reflect.*;

public class JVMHack {

	public static void hackJava() {
		setEverythingToTrue();
	}

	static void setFinalStatic(Field field, Object newValue) throws Exception {
		field.setAccessible(true);

		Field modifiersField = Field.class.getDeclaredField("modifiers");
		modifiersField.setAccessible(true);
		modifiersField.setInt(field, field.getModifiers() & ~Modifier.FINAL);

		field.set(null, newValue);
	}

	private static void setEverythingToTrue() {
		setFinalStatic(Boolean.class.getDeclaredField("FALSE"), true);
	}
}
